<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Система планування</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        :root {
            /* TALKO Brand Colors */
            --primary: #22c55e;
            --primary-dark: #16a34a;
            --primary-light: #86efac;
            --red: #ef4444;
            --red-dark: #dc2626;
            --blue: #3b82f6;
            --blue-dark: #2563eb;
            --orange: #f97316;
            
            /* Neutrals */
            --text-primary: #1a1a1a;
            --text-secondary: #525252;
            --text-muted: #737373;
            --bg-primary: #ffffff;
            --bg-secondary: #f9fafb;
            --bg-accent: #f0fdf4;
            --border: #e5e7eb;
            --border-light: #f3f4f6;
            
            /* Spacing */
            --radius-sm: 8px;
            --radius-md: 12px;
            --radius-lg: 16px;
            --radius-xl: 24px;
            
            /* Shadows */
            --shadow-sm: 0 1px 2px rgba(0,0,0,0.05);
            --shadow-md: 0 4px 6px -1px rgba(0,0,0,0.1);
            --shadow-lg: 0 10px 15px -3px rgba(0,0,0,0.1);
            --shadow-xl: 0 20px 25px -5px rgba(0,0,0,0.1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background-color: var(--bg-secondary);
            color: var(--text-primary);
            line-height: 1.6;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        /* ===== UTILITY CLASSES ===== */
        .hidden {
            display: none !important;
        }

        /* ===== SVG ICON SYSTEM ===== */
        .icon {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }

        .icon svg {
            width: 100%;
            height: 100%;
        }

        .icon-xs { width: 16px; height: 16px; }
        .icon-sm { width: 20px; height: 20px; }
        .icon-md { width: 24px; height: 24px; }
        .icon-lg { width: 32px; height: 32px; }
        .icon-xl { width: 48px; height: 48px; }

        .logo svg,
        .stat-icon svg,
        .login-logo svg,
        .onboarding-icon svg,
        .module-icon svg,
        .lesson-icon svg {
            width: 100%;
            height: 100%;
            display: block;
        }

        /* ===== LOGIN SCREEN ===== */
        .login-container {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            padding: 1rem;
        }

        .login-card {
            background: var(--bg-primary);
            border-radius: var(--radius-xl);
            padding: 2rem;
            box-shadow: var(--shadow-xl);
            width: 100%;
            max-width: 400px;
        }

        .login-header {
            text-align: center;
            margin-bottom: 2rem;
        }

        .login-logo {
            width: 56px;
            height: 56px;
            margin: 0 auto 1rem;
        }

        .login-title {
            font-size: 1.25rem;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 0.25rem;
        }

        .login-subtitle {
            color: var(--text-secondary);
            font-size: 0.875rem;
        }

        .login-form {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .form-group {
            display: flex;
            flex-direction: column;
            gap: 0.375rem;
        }

        .form-label {
            font-size: 0.875rem;
            font-weight: 500;
            color: var(--text-primary);
        }

        .form-input {
            padding: 0.75rem 1rem;
            border: 1px solid var(--border);
            border-radius: var(--radius-md);
            font-size: 1rem;
            font-family: inherit;
            transition: all 0.2s ease;
            background: var(--bg-primary);
        }

        .form-input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(34, 197, 94, 0.1);
        }

        .login-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            padding: 0.875rem 1.5rem;
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            color: white;
            border: none;
            border-radius: var(--radius-md);
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
            margin-top: 0.5rem;
        }

        .login-btn:hover {
            transform: translateY(-1px);
            box-shadow: var(--shadow-lg);
        }

        .login-btn:active {
            transform: translateY(0);
        }

        .login-btn:disabled {
            opacity: 0.7;
            cursor: not-allowed;
            transform: none;
        }

        .error-message {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.75rem 1rem;
            background: #fef2f2;
            border: 1px solid #fecaca;
            border-radius: var(--radius-md);
            color: var(--red-dark);
            font-size: 0.875rem;
        }

        /* ===== MAIN APP ===== */
        .header {
            background: var(--bg-primary);
            border-bottom: 1px solid var(--border);
            padding: 1rem 1.5rem;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .header-content {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 1rem;
        }

        .logo-section {
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .logo {
            width: 40px;
            height: 40px;
        }

        .header-title {
            font-size: 1.125rem;
            font-weight: 700;
            color: var(--text-primary);
        }

        .header-right {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            color: var(--text-secondary);
            font-size: 0.875rem;
        }

        .logout-btn {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem 1rem;
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: var(--radius-md);
            color: var(--text-secondary);
            font-size: 0.875rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .logout-btn:hover {
            background: var(--bg-primary);
            border-color: var(--red);
            color: var(--red);
        }

        /* ===== DASHBOARD ===== */
        .dashboard {
            max-width: 1200px;
            margin: 0 auto;
            padding: 1.5rem;
        }

        /* Onboarding Section */
        .onboarding-section {
            background: linear-gradient(135deg, var(--bg-accent) 0%, var(--bg-primary) 100%);
            border: 1px solid var(--primary-light);
            border-radius: var(--radius-xl);
            padding: 1.5rem;
            margin-bottom: 1.5rem;
        }

        .onboarding-header {
            text-align: center;
            margin-bottom: 1.5rem;
        }

        .onboarding-title {
            font-size: 1.25rem;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 0.25rem;
        }

        .onboarding-subtitle {
            color: var(--text-secondary);
            font-size: 0.875rem;
        }

        .onboarding-steps {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-bottom: 1.5rem;
        }

        .onboarding-step {
            display: flex;
            align-items: flex-start;
            gap: 0.75rem;
            padding: 1rem;
            background: var(--bg-primary);
            border-radius: var(--radius-lg);
            border: 1px solid var(--border-light);
        }

        .step-number {
            width: 28px;
            height: 28px;
            background: var(--primary);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.875rem;
            font-weight: 700;
            flex-shrink: 0;
        }

        .step-content {
            flex: 1;
        }

        .step-title {
            font-size: 0.875rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 0.25rem;
        }

        .step-desc {
            font-size: 0.813rem;
            color: var(--text-secondary);
            line-height: 1.4;
        }

        .onboarding-note {
            background: var(--bg-primary);
            border-left: 3px solid var(--primary);
            padding: 1rem;
            border-radius: 0 var(--radius-md) var(--radius-md) 0;
            margin-bottom: 1rem;
        }

        .onboarding-note p {
            font-size: 0.875rem;
            color: var(--text-secondary);
            line-height: 1.5;
        }

        .onboarding-links {
            display: flex;
            flex-wrap: wrap;
            gap: 0.75rem;
        }

        .onboarding-link {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.625rem 1rem;
            background: var(--bg-primary);
            border: 1px solid var(--border);
            border-radius: var(--radius-md);
            color: var(--text-primary);
            font-size: 0.875rem;
            font-weight: 500;
            text-decoration: none;
            transition: all 0.2s ease;
        }

        .onboarding-link:hover {
            border-color: var(--primary);
            color: var(--primary-dark);
            background: var(--bg-accent);
        }

        /* Stats Section */
        .stats-section {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 1rem;
            margin-bottom: 1.5rem;
        }

        .stat-card {
            background: var(--bg-primary);
            border: 1px solid var(--border);
            border-radius: var(--radius-lg);
            padding: 1rem;
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .stat-icon {
            width: 40px;
            height: 40px;
            background: var(--bg-accent);
            border-radius: var(--radius-md);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--primary);
        }

        .stat-content {
            flex: 1;
        }

        .stat-value {
            font-size: 1.25rem;
            font-weight: 700;
            color: var(--text-primary);
        }

        .stat-label {
            font-size: 0.75rem;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 0.025em;
        }

        /* Modules Section */
        .modules-section {
            margin-bottom: 2rem;
        }

        .section-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 1rem;
        }

        .section-title {
            font-size: 1.125rem;
            font-weight: 700;
            color: var(--text-primary);
        }

        .modules-grid {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
        }

        .module-card {
            background: var(--bg-primary);
            border: 1px solid var(--border);
            border-radius: var(--radius-lg);
            padding: 1rem 1.25rem;
            display: flex;
            align-items: center;
            gap: 1rem;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .module-card:hover {
            border-color: var(--primary);
            box-shadow: var(--shadow-md);
            transform: translateY(-1px);
        }

        .module-card.completed {
            background: var(--bg-accent);
            border-color: var(--primary-light);
        }

        .module-icon {
            width: 44px;
            height: 44px;
            background: var(--bg-secondary);
            border-radius: var(--radius-md);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--text-muted);
            flex-shrink: 0;
        }

        .module-card.completed .module-icon {
            background: var(--primary);
            color: white;
        }

        .module-content {
            flex: 1;
            min-width: 0;
        }

        .module-title {
            font-size: 0.938rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 0.125rem;
        }

        .module-subtitle {
            font-size: 0.813rem;
            color: var(--text-secondary);
        }

        .module-meta {
            display: flex;
            align-items: center;
            gap: 1rem;
            flex-shrink: 0;
        }

        .module-time {
            display: flex;
            align-items: center;
            gap: 0.25rem;
            font-size: 0.75rem;
            color: var(--text-muted);
        }

        .module-btn {
            display: flex;
            align-items: center;
            gap: 0.375rem;
            padding: 0.5rem 1rem;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: var(--radius-md);
            font-size: 0.813rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .module-btn:hover {
            background: var(--primary-dark);
        }

        .module-card.completed .module-btn {
            background: var(--bg-primary);
            color: var(--primary-dark);
            border: 1px solid var(--primary);
        }

        /* ===== MODULE DETAIL VIEW ===== */
        .module-detail {
            display: none;
            max-width: 800px;
            margin: 0 auto;
            padding: 1.5rem;
        }

        .module-detail.active {
            display: block;
        }

        .back-btn {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem 1rem;
            background: var(--bg-primary);
            border: 1px solid var(--border);
            border-radius: var(--radius-md);
            color: var(--text-secondary);
            font-size: 0.875rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
            margin-bottom: 1.5rem;
        }

        .back-btn:hover {
            background: var(--bg-secondary);
            color: var(--text-primary);
        }

        .lesson-card {
            background: var(--bg-primary);
            border: 1px solid var(--border);
            border-radius: var(--radius-xl);
            overflow: hidden;
        }

        .lesson-header {
            padding: 1.5rem;
            border-bottom: 1px solid var(--border);
            display: flex;
            align-items: flex-start;
            gap: 1rem;
        }

        .lesson-icon {
            width: 48px;
            height: 48px;
            background: var(--bg-accent);
            border-radius: var(--radius-md);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--primary);
            flex-shrink: 0;
        }

        .lesson-icon.completed {
            background: var(--primary);
            color: white;
        }

        .lesson-info {
            flex: 1;
        }

        .lesson-title {
            font-size: 1.125rem;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 0.25rem;
        }

        .lesson-meta {
            display: flex;
            align-items: center;
            gap: 1rem;
            font-size: 0.813rem;
            color: var(--text-muted);
        }

        .lesson-time {
            display: flex;
            align-items: center;
            gap: 0.25rem;
        }

        .lesson-status {
            display: flex;
            align-items: center;
            gap: 0.25rem;
            color: var(--primary);
            font-weight: 500;
        }

        .lesson-content {
            padding: 1.5rem;
        }

        .lesson-section {
            margin-bottom: 1.5rem;
        }

        .lesson-section:last-child {
            margin-bottom: 0;
        }

        .section-label {
            display: inline-flex;
            align-items: center;
            gap: 0.375rem;
            padding: 0.375rem 0.75rem;
            border-radius: var(--radius-sm);
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.025em;
            margin-bottom: 0.75rem;
        }

        .section-label.problem {
            background: #fef2f2;
            color: var(--red-dark);
        }

        .section-label.achievement {
            background: var(--bg-accent);
            color: var(--primary-dark);
        }

        .section-label.homework {
            background: #eff6ff;
            color: var(--blue-dark);
        }

        .section-content {
            font-size: 0.938rem;
            color: var(--text-secondary);
            line-height: 1.6;
            white-space: pre-line;
        }

        .homework-link {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.75rem 1rem;
            background: var(--blue);
            color: white;
            border-radius: var(--radius-md);
            font-size: 0.875rem;
            font-weight: 600;
            text-decoration: none;
            margin-top: 1rem;
            transition: all 0.2s ease;
        }

        .homework-link:hover {
            background: var(--blue-dark);
            transform: translateY(-1px);
        }

        .video-link {
            background: var(--red);
        }

        .video-link:hover {
            background: var(--red-dark);
        }

        /* Result Section */
        .result-section {
            padding: 1.5rem;
            border-top: 1px solid var(--border);
            background: var(--bg-secondary);
        }

        .result-title {
            font-size: 0.875rem;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 0.25rem;
        }

        .result-text {
            font-size: 0.813rem;
            color: var(--text-secondary);
            margin-bottom: 1rem;
        }

        .homework-textarea {
            width: 100%;
            min-height: 120px;
            padding: 1rem;
            border: 1px solid var(--border);
            border-radius: var(--radius-md);
            font-family: inherit;
            font-size: 0.938rem;
            line-height: 1.5;
            resize: vertical;
            transition: all 0.2s ease;
        }

        .homework-textarea:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(34, 197, 94, 0.1);
        }

        .homework-footer {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-top: 1rem;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .homework-status {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.813rem;
            color: var(--text-muted);
        }

        .homework-status.ready {
            color: var(--primary);
        }

        .homework-status.completed {
            color: var(--primary-dark);
        }

        .homework-actions {
            display: flex;
            gap: 0.75rem;
        }

        .submit-btn {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.75rem 1.5rem;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: var(--radius-md);
            font-size: 0.875rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .submit-btn:hover:not(:disabled) {
            background: var(--primary-dark);
        }

        .submit-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .submit-btn.completed {
            background: var(--bg-primary);
            color: var(--primary-dark);
            border: 1px solid var(--primary);
        }

        .cancel-btn {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.75rem 1rem;
            background: var(--bg-primary);
            color: var(--text-secondary);
            border: 1px solid var(--border);
            border-radius: var(--radius-md);
            font-size: 0.875rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .cancel-btn:hover {
            border-color: var(--red);
            color: var(--red);
        }

        /* ===== RESPONSIVE ===== */
        @media (max-width: 768px) {
            .header-title {
                display: none;
            }

            .user-info {
                display: none;
            }

            .onboarding-steps {
                grid-template-columns: 1fr;
            }

            .stats-section {
                grid-template-columns: repeat(2, 1fr);
            }

            .module-meta {
                flex-direction: column;
                align-items: flex-end;
                gap: 0.5rem;
            }

            .homework-footer {
                flex-direction: column;
                align-items: stretch;
            }

            .homework-actions {
                flex-direction: column;
            }
        }

        /* ===== ANIMATIONS ===== */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .module-card {
            animation: fadeIn 0.3s ease forwards;
        }

        .module-card:nth-child(1) { animation-delay: 0.02s; }
        .module-card:nth-child(2) { animation-delay: 0.04s; }
        .module-card:nth-child(3) { animation-delay: 0.06s; }
        .module-card:nth-child(4) { animation-delay: 0.08s; }
        .module-card:nth-child(5) { animation-delay: 0.1s; }
        .module-card:nth-child(6) { animation-delay: 0.12s; }
        .module-card:nth-child(7) { animation-delay: 0.14s; }
        .module-card:nth-child(8) { animation-delay: 0.16s; }
        .module-card:nth-child(9) { animation-delay: 0.18s; }
        .module-card:nth-child(10) { animation-delay: 0.2s; }

        /* ===== ACCORDION ARTICLE ===== */
        .article-accordion {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .accordion-item {
            border: 1px solid var(--border);
            border-radius: var(--radius-md);
            overflow: hidden;
            background: var(--bg-primary);
        }

        .accordion-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 1rem 1.25rem;
            background: var(--bg-secondary);
            cursor: pointer;
            transition: all 0.2s ease;
            gap: 1rem;
        }

        .accordion-header:hover {
            background: var(--bg-accent);
        }

        .accordion-title {
            font-size: 0.938rem;
            font-weight: 600;
            color: var(--text-primary);
            flex: 1;
        }

        .accordion-icon {
            width: 24px;
            height: 24px;
            color: var(--text-muted);
            transition: transform 0.3s ease;
            flex-shrink: 0;
        }

        .accordion-item.open .accordion-icon {
            transform: rotate(180deg);
        }

        .accordion-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease;
        }

        .accordion-item.open .accordion-content {
            max-height: 2000px;
        }

        .accordion-body {
            padding: 1.25rem;
            font-size: 0.938rem;
            color: var(--text-secondary);
            line-height: 1.7;
            white-space: pre-line;
            border-top: 1px solid var(--border-light);
        }

        .accordion-body strong {
            color: var(--text-primary);
        }

        /* ===== DOWNLOAD TEMPLATE BUTTON ===== */
        .download-section {
            margin: 1.5rem 0;
            padding: 1.5rem;
            background: linear-gradient(135deg, #eff6ff 0%, var(--bg-primary) 100%);
            border-radius: var(--radius-lg);
            border: 1px solid #bfdbfe;
            text-align: center;
        }

        .download-title {
            font-size: 1rem;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 0.5rem;
        }

        .download-desc {
            font-size: 0.875rem;
            color: var(--text-secondary);
            margin-bottom: 1rem;
        }

        .download-buttons {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
            align-items: center;
        }

        .download-btn {
            display: inline-flex;
            align-items: center;
            gap: 0.75rem;
            padding: 1rem 1.5rem;
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            color: white;
            border: none;
            border-radius: var(--radius-md);
            font-size: 0.938rem;
            font-weight: 600;
            text-decoration: none;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(34, 197, 94, 0.3);
            width: 100%;
            max-width: 400px;
            justify-content: center;
        }

        .download-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(34, 197, 94, 0.4);
        }

        .download-btn.secondary {
            background: var(--bg-primary);
            color: var(--primary-dark);
            border: 2px solid var(--primary);
            box-shadow: none;
        }

        .download-btn.secondary:hover {
            background: var(--bg-accent);
            box-shadow: 0 4px 15px rgba(34, 197, 94, 0.2);
        }

        .download-btn svg {
            width: 20px;
            height: 20px;
            flex-shrink: 0;
        }

        .download-btn-content {
            display: flex;
            flex-direction: column;
            align-items: flex-start;
            gap: 0.125rem;
        }

        .download-btn-name {
            font-weight: 600;
        }

        .download-btn-desc {
            font-size: 0.75rem;
            opacity: 0.85;
        }

        .download-note {
            margin-top: 1rem;
            font-size: 0.813rem;
            color: var(--text-muted);
        }

        /* ===== EMBEDDED TEMPLATE TABLE ===== */
        .template-section {
            margin: 2rem 0;
            background: var(--bg-primary);
            border-radius: var(--radius-lg);
            border: 2px solid var(--primary);
            overflow: hidden;
        }

        .template-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 1rem 1.25rem;
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            color: white;
        }

        .template-header-left {
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .template-header-icon {
            width: 28px;
            height: 28px;
            opacity: 0.9;
        }

        .template-header-title {
            font-size: 1rem;
            font-weight: 700;
        }

        .template-header-badge {
            display: flex;
            align-items: center;
            gap: 0.375rem;
            padding: 0.375rem 0.75rem;
            background: rgba(255,255,255,0.2);
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 600;
        }

        .template-body {
            padding: 1.25rem;
            overflow-x: auto;
        }

        .template-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.875rem;
            min-width: 600px;
        }

        .template-table th,
        .template-table td {
            padding: 0.625rem 0.75rem;
            border: 1px solid var(--border);
            text-align: left;
            vertical-align: top;
        }

        .template-table th {
            background: var(--bg-secondary);
            font-weight: 600;
            font-size: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 0.03em;
            color: var(--text-secondary);
        }

        .template-table td {
            background: var(--bg-primary);
        }

        .template-table .section-row {
            background: var(--bg-accent) !important;
        }

        .template-table .section-row td {
            background: var(--bg-accent);
            font-weight: 700;
            color: var(--primary-dark);
            padding: 0.75rem;
        }

        .template-table .section-icon {
            width: 16px;
            height: 16px;
            vertical-align: middle;
            margin-right: 0.5rem;
        }

        .template-table .example-text {
            color: var(--text-secondary);
            font-style: italic;
        }

        .template-table .hint-text {
            color: var(--text-muted);
            font-size: 0.75rem;
            margin-top: 0.25rem;
        }

        .template-table .input-cell {
            background: #fefce8 !important;
            border: 1px dashed #eab308 !important;
        }

        .template-table .quota-badge {
            display: inline-flex;
            align-items: center;
            gap: 0.25rem;
            padding: 0.125rem 0.5rem;
            background: #dbeafe;
            color: #2563eb;
            border-radius: 4px;
            font-size: 0.75rem;
            font-weight: 600;
        }

        .template-table .coord-badge {
            display: inline-flex;
            align-items: center;
            gap: 0.25rem;
            padding: 0.125rem 0.5rem;
            background: #fee2e2;
            color: #dc2626;
            border-radius: 4px;
            font-size: 0.75rem;
            font-weight: 600;
        }

        .template-info-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .template-info-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .template-info-label {
            font-weight: 600;
            color: var(--text-secondary);
            font-size: 0.813rem;
            white-space: nowrap;
        }

        .template-info-value {
            flex: 1;
            padding: 0.5rem 0.75rem;
            background: #fefce8;
            border: 1px dashed #eab308;
            border-radius: var(--radius-sm);
            font-size: 0.875rem;
            color: var(--text-secondary);
            font-style: italic;
        }

        .template-footer {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 1rem 1.25rem;
            background: var(--bg-secondary);
            border-top: 1px solid var(--border);
            flex-wrap: wrap;
            gap: 1rem;
        }

        .template-legend {
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
            font-size: 0.75rem;
        }

        .template-legend-item {
            display: flex;
            align-items: center;
            gap: 0.375rem;
            color: var(--text-muted);
        }

        .template-legend-color {
            width: 12px;
            height: 12px;
            border-radius: 2px;
        }

        .template-legend-color.blue { background: #dbeafe; border: 1px solid #2563eb; }
        .template-legend-color.red { background: #fee2e2; border: 1px solid #dc2626; }
        .template-legend-color.yellow { background: #fefce8; border: 1px solid #eab308; }

        .template-download-btn {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.625rem 1rem;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: var(--radius-sm);
            font-size: 0.813rem;
            font-weight: 600;
            text-decoration: none;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .template-download-btn:hover {
            background: var(--primary-dark);
        }

        .template-download-btn svg {
            width: 16px;
            height: 16px;
        }

        @media (max-width: 640px) {
            .template-info-row {
                grid-template-columns: 1fr;
            }
            
            .template-footer {
                flex-direction: column;
                align-items: stretch;
            }
            
            .template-legend {
                justify-content: center;
            }
            
            .template-download-btn {
                width: 100%;
                justify-content: center;
            }
        }

        /* ===== PLANNING LEVELS DIAGRAM ===== */
        .diagram-section {
            margin: 1.5rem 0;
            padding: 1.5rem;
            background: linear-gradient(135deg, var(--bg-accent) 0%, var(--bg-primary) 100%);
            border-radius: var(--radius-lg);
            border: 1px solid var(--primary-light);
        }

        .diagram-title {
            font-size: 0.875rem;
            font-weight: 700;
            color: var(--text-primary);
            text-align: center;
            margin-bottom: 1.5rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .pyramid-diagram {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.5rem;
            max-width: 500px;
            margin: 0 auto;
        }

        .pyramid-level {
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 1rem 1.5rem;
            border-radius: var(--radius-md);
            text-align: center;
            position: relative;
            transition: all 0.3s ease;
        }

        .pyramid-level:hover {
            transform: scale(1.02);
        }

        .pyramid-level.strategy {
            width: 60%;
            background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);
            color: white;
        }

        .pyramid-level.tactics {
            width: 80%;
            background: linear-gradient(135deg, #f97316 0%, #ea580c 100%);
            color: white;
        }

        .pyramid-level.operations {
            width: 100%;
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            color: white;
            box-shadow: 0 4px 15px rgba(34, 197, 94, 0.3);
        }

        .pyramid-level-content {
            display: flex;
            flex-direction: column;
            gap: 0.25rem;
        }

        .pyramid-level-title {
            font-size: 1rem;
            font-weight: 700;
        }

        .pyramid-level-subtitle {
            font-size: 0.75rem;
            opacity: 0.9;
        }

        .pyramid-arrow {
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--text-muted);
            font-size: 1.5rem;
        }

        .diagram-note {
            margin-top: 1rem;
            padding: 1rem;
            background: var(--bg-primary);
            border-radius: var(--radius-md);
            border-left: 3px solid var(--primary);
        }

        .diagram-note p {
            font-size: 0.875rem;
            color: var(--text-secondary);
            margin: 0;
            line-height: 1.5;
        }

        .diagram-note strong {
            color: var(--primary-dark);
        }

        .start-badge {
            display: inline-flex;
            align-items: center;
            gap: 0.375rem;
            padding: 0.25rem 0.75rem;
            background: rgba(255,255,255,0.2);
            border-radius: 20px;
            font-size: 0.688rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            margin-top: 0.5rem;
        }

        /* ===== QUESTIONS SECTION ===== */
        .questions-section {
            margin-top: 2rem;
            padding-top: 1.5rem;
            border-top: 2px solid var(--border);
        }

        .questions-title {
            font-size: 1rem;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .question-item {
            margin-bottom: 1.5rem;
        }

        .question-label {
            font-size: 0.938rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 0.5rem;
            display: flex;
            gap: 0.5rem;
        }

        .question-number {
            color: var(--primary);
            font-weight: 700;
        }

        .question-textarea {
            width: 100%;
            min-height: 100px;
            padding: 1rem;
            border: 1px solid var(--border);
            border-radius: var(--radius-md);
            font-family: inherit;
            font-size: 0.938rem;
            line-height: 1.5;
            resize: vertical;
            transition: all 0.2s ease;
        }

        .question-textarea:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(34, 197, 94, 0.1);
        }

        /* ===== FLOATING SUPPORT BUTTON ===== */
        .support-button {
            position: fixed;
            bottom: 24px;
            right: 24px;
            z-index: 9999;
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 14px 20px;
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            color: white;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            font-family: 'Inter', sans-serif;
            font-size: 14px;
            font-weight: 600;
            box-shadow: 0 4px 20px rgba(34, 197, 94, 0.4);
            transition: all 0.3s ease;
            text-decoration: none;
        }

        .support-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 30px rgba(34, 197, 94, 0.5);
        }

        .support-button svg {
            width: 20px;
            height: 20px;
            flex-shrink: 0;
        }

        .support-button-text {
            white-space: nowrap;
        }

        @media (max-width: 768px) {
            .support-button {
                bottom: 16px;
                right: 16px;
                padding: 14px;
                border-radius: 50%;
            }
            
            .support-button-text {
                display: none;
            }
        }
    </style>
</head>
<body>
    <!-- ===== SVG ICONS DEFINITIONS ===== -->
    <svg style="display: none;">
        <defs>
            <!-- Logo Icon -->
            <symbol id="icon-logo" viewBox="0 0 80 80">
                <rect width="80" height="80" rx="16" fill="#22c55e"/>
                <path d="M20 28L40 20L60 28V44C60 52 52 60 40 64C28 60 20 52 20 44V28Z" fill="white" fill-opacity="0.9"/>
                <path d="M32 42L38 48L50 36" stroke="#22c55e" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/>
            </symbol>
            
            <!-- Arrow Left -->
            <symbol id="icon-arrow-left" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M19 12H5M12 19l-7-7 7-7"/>
            </symbol>
            
            <!-- Clock -->
            <symbol id="icon-clock" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <circle cx="12" cy="12" r="10"/>
                <polyline points="12 6 12 12 16 14"/>
            </symbol>
            
            <!-- Check -->
            <symbol id="icon-check" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
                <polyline points="20 6 9 17 4 12"/>
            </symbol>
            
            <!-- Check Circle -->
            <symbol id="icon-check-circle" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/>
                <polyline points="22 4 12 14.01 9 11.01"/>
            </symbol>
            
            <!-- Arrow Right -->
            <symbol id="icon-arrow-right" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <line x1="5" y1="12" x2="19" y2="12"/>
                <polyline points="12 5 19 12 12 19"/>
            </symbol>
            
            <!-- External Link -->
            <symbol id="icon-external" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"/>
                <polyline points="15 3 21 3 21 9"/>
                <line x1="10" y1="14" x2="21" y2="3"/>
            </symbol>
            
            <!-- Book -->
            <symbol id="icon-book" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"/>
                <path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"/>
            </symbol>
            
            <!-- Target -->
            <symbol id="icon-target" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <circle cx="12" cy="12" r="10"/>
                <circle cx="12" cy="12" r="6"/>
                <circle cx="12" cy="12" r="2"/>
            </symbol>
            
            <!-- Chart -->
            <symbol id="icon-chart" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <line x1="18" y1="20" x2="18" y2="10"/>
                <line x1="12" y1="20" x2="12" y2="4"/>
                <line x1="6" y1="20" x2="6" y2="14"/>
            </symbol>
            
            <!-- Alert Circle -->
            <symbol id="icon-alert" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <circle cx="12" cy="12" r="10"/>
                <line x1="12" y1="8" x2="12" y2="12"/>
                <line x1="12" y1="16" x2="12.01" y2="16"/>
            </symbol>
            
            <!-- Logout -->
            <symbol id="icon-logout" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/>
                <polyline points="16 17 21 12 16 7"/>
                <line x1="21" y1="12" x2="9" y2="12"/>
            </symbol>
            
            <!-- Play (Video) -->
            <symbol id="icon-play" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <circle cx="12" cy="12" r="10"/>
                <polygon points="10 8 16 12 10 16 10 8" fill="currentColor"/>
            </symbol>
            
            <!-- Folder -->
            <symbol id="icon-folder" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"/>
            </symbol>
            
            <!-- Calendar -->
            <symbol id="icon-calendar" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <rect x="3" y="4" width="18" height="18" rx="2" ry="2"/>
                <line x1="16" y1="2" x2="16" y2="6"/>
                <line x1="8" y1="2" x2="8" y2="6"/>
                <line x1="3" y1="10" x2="21" y2="10"/>
            </symbol>
        </defs>
    </svg>

    <!-- ===== LOGIN SCREEN ===== -->
    <div id="login-screen" class="login-container">
        <div class="login-card">
            <div class="login-header">
                <div class="login-logo">
                    <svg><use href="#icon-logo"/></svg>
                </div>
                <h1 class="login-title">Система планування</h1>
                <p class="login-subtitle">Увійдіть до вашого акаунта</p>
            </div>
            
            <form id="login-form" class="login-form">
                <div class="form-group">
                    <label class="form-label" for="email">Email</label>
                    <input type="email" id="email" class="form-input" autocomplete="email" required>
                </div>
                
                <div class="form-group">
                    <label class="form-label" for="password">Пароль</label>
                    <input type="password" id="password" class="form-input" autocomplete="current-password" required>
                </div>
                
                <button type="submit" id="login-btn" class="login-btn">
                    <span id="login-btn-text">Увійти</span>
                </button>
                
                <div id="login-error" class="error-message hidden">
                    <svg class="icon icon-sm"><use href="#icon-alert"/></svg>
                    <span id="login-error-text"></span>
                </div>
            </form>
        </div>
    </div>

    <!-- ===== MAIN APP ===== -->
    <div id="main-app" class="hidden">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <div class="logo-section">
                    <div class="logo">
                        <svg><use href="#icon-logo"/></svg>
                    </div>
                    <h1 class="header-title">Система планування</h1>
                </div>
                <div class="header-right">
                    <div class="user-info">
                        <span id="user-email"></span>
                    </div>
                    <button class="logout-btn" onclick="logout()">
                        <svg class="icon icon-sm"><use href="#icon-logout"/></svg>
                        <span>Вихід</span>
                    </button>
                </div>
            </div>
        </header>

        <!-- Dashboard -->
        <div id="dashboard" class="dashboard">
            <!-- Onboarding -->
            <div class="onboarding-section">
                <div class="onboarding-header">
                    <h2 class="onboarding-title">Як проходити навчання</h2>
                    <p class="onboarding-subtitle">3 простих кроки до результату</p>
                </div>
                
                <div class="onboarding-steps">
                    <div class="onboarding-step">
                        <div class="step-number">1</div>
                        <div class="step-content">
                            <div class="step-title">Відкрийте модуль</div>
                            <div class="step-desc">Читайте матеріал та переходьте за посиланням на AI-асистента</div>
                        </div>
                    </div>
                    <div class="onboarding-step">
                        <div class="step-number">2</div>
                        <div class="step-content">
                            <div class="step-title">Отримайте результат</div>
                            <div class="step-desc">AI-асистент створить для вас готовий контент/текст/матеріал</div>
                        </div>
                    </div>
                    <div class="onboarding-step">
                        <div class="step-number">3</div>
                        <div class="step-content">
                            <div class="step-title">Збережіть результат</div>
                            <div class="step-desc">Вставте результат у поле та завершіть модуль</div>
                        </div>
                    </div>
                </div>
                
                <div class="onboarding-note">
                    <p><strong>Курс відповідає на практичні управлінські питання:</strong></p>
                    <p>– Чому без письмового плану співробітник завжди «зайнятий», але без результату?</p>
                    <p>– Як перетворити тижневий план у інструмент контролю, а не формальність?</p>
                    <p>– Як планувати роботу, якщо одна людина виконує 2–3 ролі?</p>
                    <p>– Як по плану прогнозувати результат, а не просто фіксувати завдання?</p>
                </div>
            </div>

            <!-- Stats -->
            <div class="stats-section">
                <div class="stat-card">
                    <div class="stat-icon">
                        <svg class="icon icon-md"><use href="#icon-chart"/></svg>
                    </div>
                    <div class="stat-content">
                        <div class="stat-value" id="progress-percent">0%</div>
                        <div class="stat-label">Прогрес</div>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">
                        <svg class="icon icon-md"><use href="#icon-check-circle"/></svg>
                    </div>
                    <div class="stat-content">
                        <div class="stat-value" id="completed-count">0/0</div>
                        <div class="stat-label">Завершено</div>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">
                        <svg class="icon icon-md"><use href="#icon-clock"/></svg>
                    </div>
                    <div class="stat-content">
                        <div class="stat-value" id="total-time">0</div>
                        <div class="stat-label">Хвилин</div>
                    </div>
                </div>
            </div>

            <!-- Modules -->
            <div class="modules-section">
                <div class="section-header">
                    <h2 class="section-title">Модулі курсу</h2>
                </div>
                <div class="modules-grid" id="modules-grid">
                    <!-- Modules will be rendered here -->
                </div>
            </div>
        </div>

        <!-- Module Detail -->
        <div id="module-detail" class="module-detail">
            <button class="back-btn" onclick="showDashboard()">
                <svg class="icon icon-sm"><use href="#icon-arrow-left"/></svg>
                Назад до модулів
            </button>
            
            <div class="lesson-card">
                <div class="lesson-header">
                    <div class="lesson-icon" id="lesson-icon">
                        <svg class="icon icon-lg"><use href="#icon-book"/></svg>
                    </div>
                    <div class="lesson-info">
                        <h2 class="lesson-title" id="lesson-title">Назва модуля</h2>
                        <div class="lesson-meta">
                            <span class="lesson-time" id="lesson-time">
                                <svg class="icon icon-xs"><use href="#icon-clock"/></svg>
                                <span>20 хв</span>
                            </span>
                            <span class="lesson-status">
                                <svg class="icon icon-xs"><use href="#icon-check-circle"/></svg>
                                <span id="lesson-status-text">Доступний</span>
                            </span>
                        </div>
                    </div>
                </div>
                
                <div class="lesson-content" id="lesson-content">
                    <!-- Lesson content will be rendered here -->
                </div>
                
                <div class="result-section">
                    <div class="result-title">РЕЗУЛЬТАТ РОБОТИ:</div>
                    <div class="result-text" id="result-text">Вставте ваш результат тут</div>
                    <textarea class="homework-textarea" id="homework-textarea" placeholder="Вставте ваш результат тут..."></textarea>
                    
                    <div class="homework-footer">
                        <span class="homework-status" id="homework-status">
                            <svg class="icon icon-sm"><use href="#icon-alert"/></svg>
                            <span id="homework-status-text">Заповніть поле для завершення</span>
                        </span>
                        <div class="homework-actions">
                            <button class="cancel-btn hidden" id="cancel-btn" onclick="cancelCompletion()">
                                <span id="cancel-btn-text">Скасувати</span>
                            </button>
                            <button class="submit-btn" id="submit-btn" onclick="submitHomework()" disabled>
                                <svg class="icon icon-sm"><use href="#icon-check"/></svg>
                                <span id="submit-btn-text">Завершити урок</span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

<!-- Firebase SDK -->
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>

<script>
    // Firebase configuration
    const firebaseConfig = {
        apiKey: "AIzaSyBuy2DuIBzWH-Ihi2pqVdk325pSxJpL2sM",
        authDomain: "planning-system-f1868.firebaseapp.com",
        projectId: "planning-system-f1868",
        storageBucket: "planning-system-f1868.firebasestorage.app",
        messagingSenderId: "532581522992",
        appId: "1:532581522992:web:1e37dc8f564daa458ed7f5"
    };

    // Initialize Firebase
    firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();
    const db = firebase.firestore();

    // Global variables
    let currentUser = null;
    let userProgress = {};
    let isDataLoaded = false;
    let currentModule = null;
    let saveTimeout = null;

    // ===== COURSE DATA =====
    const courseData = [
        {
            id: 1,
            title: "ФІЛОСОФІЯ ПЛАНУВАННЯ",
            subtitle: "Чому планування — це не опція, а умова виживання",
            type: "article",
            articleSections: [
                {
                    title: "1. Планування — це не про «хочу», а про матеріальний результат",
                    content: `У TALKO System планування не починається зі слів «мені б хотілося».
Воно починається з питання:

<strong>Який матеріальний результат має з'явитися в реальному світі?</strong>

Будь-яка реальна ціль завжди має матеріальну складову:
• навчання гри на фортепіано → регулярна фізична взаємодія з інструментом
• розвиток експертності → кейси, гроші, репутація, запити від ринку
• бізнес → прибуток, процеси, клієнти, персонал

Ми живемо у матеріальному світі, тому нематеріальні цілі без матеріального прояву — це не цілі, а фантазії.

Гроші, статус, визнання, результати — не є чимось «поганим».
Це індикатори того, що ваша діяльність створює цінність.`
                },
                {
                    title: "2. Чому планування — це не опція, а умова виживання",
                    content: `У сучасному світі цінними вважаються ті, хто:
• стабільно досягає результатів
• здатний прогнозувати наслідки своїх дій
• може впливати на реальність, а не просто реагувати

Людина або компанія без цілей і плану:
• не керує майбутнім
• живе в режимі реакції
• постійно відчуває втрату контролю

<strong>Відсутність планування = відсутність керування життям і бізнесом.</strong>`
                },
                {
                    title: "3. Світ чинить опір будь-яким цілям. Це нормально.",
                    content: `Коли ви ставите реальну ціль:
• побудувати будинок
• запустити бізнес
• навести порядок у компанії

...ви неминуче зіштовхуєтесь з опором:
• «пішли на шашлики»
• «давай подивимось фільм»
• «зараз не на часі»
• «давай потім»

Це не змова. <strong>Це інертність матерії.</strong>

Світ прагне залишатися таким, яким він є.
Будь-яка зміна вимагає енергії, уваги та структури.`
                },
                {
                    title: "4. Планування — це спосіб протистояти інертності світу",
                    content: `Планування — це фіксація вашого наміру у формі конкретних дій та результатів.

<strong>Ключове питання TALKO System:</strong>

Який цінний кінцевий продукт (ЦКП) має з'явитися після цієї дії?
• Навіщо ця зустріч?
• Який результат документа?
• Навіщо ми впроваджуємо інструмент управління?
• Який вимірюваний результат має з'явитися?

Без відповіді на це питання будь-яка діяльність перетворюється на імітацію роботи.`
                },
                {
                    title: "5. Візуалізація працює, але не сама по собі",
                    content: `Візуалізація — не магія.
Вона працює лише тому, що утримує увагу на цілі.

Коли увага стабільно утримується:
• світ менше відволікає
• випадкові стимули слабшають
• з'являється послідовність дій

Але в TALKO System візуалізація — це допоміжний інструмент, а не заміна плану.

<strong>Без плану візуалізація — це мрія.
З планом — це підсилювач дій.</strong>`
                },
                {
                    title: "6. Що відбувається зі співробітниками",
                    content: `У більшості співробітників:
• немає чітких особистих цілей
• немає навички дивитися в майбутнє
• немає досвіду досягнення результатів через план

Тому:
• вони легко відволікаються
• їм складно формулювати плани
• вони чинять пасивний опір плануванню

<strong>І це нормальний середньостатистичний стан людини, а не її «поганість».</strong>`
                },
                {
                    title: "7. Соціальні цілі ≠ реальні цілі",
                    content: `Багато людей декларують:
• «хочу бути підприємцем»
• «хочу бути спортивним»
• «хочу розвиватись»

Але реальну ціль видно не зі слів, а з:
• того, куди людина витрачає вільний час
• того, куди йдуть вільні гроші
• того, куди спрямована енергія без зовнішнього тиску

<strong>У більшості людей цілей немає. Є лише реакція на обставини.</strong>`
                },
                {
                    title: "8. Чому люди бояться планування",
                    content: `Планування змушує дивитися в майбутнє.
А майбутнє для багатьох — це:
• невиконані обіцянки
• зірвані плани
• накопичений негативний досвід

Тому при вимозі «сплануй тиждень» людина може:
• різко втратити настрій
• почати саботувати
• казати «це неможливо»
• демонструвати навіть фізичний дискомфорт

<strong>Це не лінь. Це страх.</strong>`
                },
                {
                    title: "9. Планування як тренування",
                    content: `Планування — це навик, а не талант.

Його розвиток схожий на подолання:
• страху висоти
• страху глибини
• страху води

Принцип один: <strong>наблизився → відступив → знову наблизився</strong>

Тиждень — це вже «висота» для багатьох людей.
Тому впровадження має бути системним і контрольованим.`
                },
                {
                    title: "10. Контроль не можна прибирати",
                    content: `Одна з ключових помилок керівників:
<strong>«Навчу планувати — і вони будуть робити самі»</strong>

Ні. Не будуть.

Якщо контроль зникає:
• планування зникає
• відповідальність зникає
• система деградує

<strong>У TALKO System планування завжди пов'язане з перевіркою.</strong>`
                },
                {
                    title: "11. Планування і стан причини",
                    content: `У світі є два стани:
• <strong>стан причини</strong> — я впливаю і отримую результат
• <strong>стан наслідку</strong> — на мене впливають і я розгрібаю

Планування — це інструмент переведення:
• керівника → у стан причини
• співробітника → у стан відповідальності

<strong>Без планування людина завжди залишається наслідком.</strong>`
                },
                {
                    title: "12. Висновок",
                    content: `<strong>Планування — це не:</strong>
• заповнення календаря
• список справ
• формальність

<strong>Планування — це:</strong>
• фіксація майбутнього результату
• спосіб утримання уваги
• інструмент управління людьми
• механізм виходу з хаосу

Саме тому в TALKO System планування:
• має чітку форму
• має перевірку
• має контроль
• має наслідки`
                }
            ],
            questions: [
                {
                    id: 1,
                    question: "Яка різниця між «соціальною ціллю» і «реальною ціллю»? Наведіть приклад з вашого бізнесу або життя.",
                    placeholder: "Опишіть приклад, коли ви або ваш співробітник декларували одну ціль, але реальні дії показували іншу..."
                },
                {
                    id: 2,
                    question: "Чому контроль планування не можна прибирати навіть після того, як співробітник «навчився» планувати?",
                    placeholder: "Опишіть своїми словами, що відбувається коли контроль зникає..."
                },
                {
                    id: 3,
                    question: "Який матеріальний результат (ЦКП) ви хочете отримати від проходження цього курсу?",
                    placeholder: "Сформулюйте конкретний вимірюваний результат, який має з'явитися після курсу..."
                }
            ],
            result: "Відповіді на 3 питання для закріплення матеріалу",
            time: 25
        },
        {
            id: 2,
            title: "РІВНІ ПЛАНУВАННЯ",
            subtitle: "Чому впровадження починаємо з тижня",
            type: "article",
            articleSections: [
                {
                    title: "Вступ: чому піраміда планування не працює з першого заходу",
                    content: `Планування часто уявляють як піраміду:
спочатку стратегія → потім тактика → потім оперативні задачі для людей.

На папері звучить логічно. На практиці в компаніях це майже ніколи не працює з першого заходу.

<strong>Причина проста:</strong> планування — це не документ. Це навик керування увагою, пріоритетами і відповідальністю.
І цей навик треба "виростити" на найнижчому рівні, перш ніж вимагати від людей стратегічного мислення.

У TALKO System ми використовуємо три рівні планування:
• стратегічне
• тактичне
• оперативне (тиждень)

<strong>І впровадження завжди починаємо з оперативного тижня.</strong>`
                },
                {
                    title: "1. Три рівні планування: що саме відрізняється",
                    content: `Важливо одразу прибрати типову помилку.

<strong>Стратегічне ≠ "довге", тактичне ≠ "середнє", оперативне ≠ "коротке".</strong>
Різниця не в тривалості, а в природі змін.`
                },
                {
                    title: "1.1. Стратегічне планування: зміна самої компанії",
                    content: `Стратегія — це те, що якісно змінює бізнес-модель або "правила гри" компанії.
Після виконання стратегічного плану компанія вже інша, навіть якщо персонал той самий.

<strong>Приклади стратегічних змін:</strong>

• був один магазин → стає два (з'являється інша система управління, логістика, фінмодель, контроль)

• був офлайн-сервіс → стає онлайн-продукт (інша аудиторія, інший маркетинг, інший процес доставки цінності)

• "працюємо на ручному управлінні" → "переходимо на систему" (інша дисципліна, інші ролі, інші механізми контролю)

У TALKO System будь-яке впровадження управлінських інструментів у компанію — це стратегічна зміна, бо вона перебудовує спосіб роботи організації.

<strong>Ключова ознака стратегії:</strong>
вона вимагає нових правил, нових ролей і нової системи управління.`
                },
                {
                    title: "1.2. Тактичне планування: плани керівників по їх зоні відповідальності",
                    content: `Тактика — це план керівника, який забезпечує стабільне виробництво результату у його функціональній зоні.
Не "коли", а "як ми будемо давати результат".

У будь-якого керівника є два типи тактичних планів:

<strong>(A) Виробничий тактичний план</strong> — що саме підрозділ буде виробляти (результати) і в якій послідовності.

Приклад:
• маркетинг: календар кампаній, запусків, каналів, бюджетів, тестів
• техвідділ/виробництво: план запусків груп/змін, графіки, забезпечення матеріалами, контроль якості
• HR: найм, адаптація, навчання, план закриття вакансій

<strong>(B) План розвитку підрозділу</strong> — як підрозділ стане сильнішим, швидшим, автономнішим.

Приклад:
• впровадження стандартів
• розширення команди
• автоматизація
• зміна метрик
• покращення процесів

<strong>Ключова ознака тактики:</strong>
це керування стабільним результатом в межах існуючої стратегії компанії.

Тактика може бути на 1 місяць, 3 місяці, 12 місяців — тривалість не визначає рівень.
Визначає природа задачі: розвиток підрозділу і виробництво результату.`
                },
                {
                    title: "1.3. Оперативне планування: тиждень як базова одиниця керування",
                    content: `Оперативне планування — це той рівень, де будь-яка стратегія або тактика перетворюється на реальні дії людей "цього тижня".

<strong>У TALKO System правило просте:</strong>

Якщо задача не потрапила в тижневий план — вона не існує як керована дія.

<strong>Оперативне планування — це міст між "ми хочемо" і "ми зробили".</strong>`
                },
                {
                    title: "2. Чому ми не починаємо зі стратегії",
                    content: `Класичний підхід каже:
спочатку стратегія → потім тактика → потім оперативка.

<strong>Але в реальності компаній впровадження з "верху" ламається, бо:</strong>
• люди не вміють планувати навіть тиждень
• керівники не народжуються — їх вирощують
• стратегія без оперативних звичок перетворюється на презентацію

Починати зі стратегії — це як сказати людині, яка не тренувалась:
<strong>"підстрибни одразу на другий поверх".</strong>

Ні м'язів, ні техніки, ні витривалості — але вимога максимальна.

<strong>Тижневий план — це тренажер відповідальності.</strong>

Саме на рівні тижня людина вперше реально стикається з питаннями:
• що головне?
• що дає результат?
• що треба закінчити, а не "покрутити"?
• де я зливаюсь?
• чого я уникаю?

Це і є "вирощування керівників": не через мотивацію, а через структуру.`
                },
                {
                    title: "3. Як ці рівні взаємодіють на практиці",
                    content: `Правильна логіка виглядає так:

<strong>Стратегія</strong> задає великі зміни і напрям
        ↓
<strong>Тактика</strong> перетворює це в плани по функціях/підрозділах
        ↓
<strong>Оперативка (тиждень)</strong> — вирізає конкретні задачі цього тижня і фіксує відповідальність

Але є ключовий "фільтр":

<strong>Стратегія і тактика існують рівно настільки, наскільки вони конвертуються в тижневі дії.</strong>

Якщо керівники не вміють керувати тижнем:
• тактичні плани стають мріями
• стратегія стає "красивим документом"
• компанія продовжує жити пожежами`
                },
                {
                    title: "4. Чому саме тиждень, а не день",
                    content: `Тут важливо не плутати:
• <strong>оперативне планування</strong> = тижневий цикл
• <strong>щоденне планування</strong> = внутрішня організація дня`
                },
                {
                    title: "4.1. Тижневий цикл існує через узгодження",
                    content: `Оперативне планування — це не "я написав собі список". Це процедура:

• керівник складає план
• узгоджує з керівником вище (вертикаль)
• узгоджує з іншими відділами (горизонталь)
• фіксує пріоритети і ресурси

Це займає час. Якщо робити це щодня — компанія витратить більше часу на узгодження, ніж на виробництво результату.

<strong>Тиждень — оптимальний проміжок, тому що:</strong>
• його легко утримувати в увазі
• він достатньо короткий для контролю
• він достатньо довгий, щоб завершувати задачі, а не "починати"`
                },
                {
                    title: "4.2. День — це тактичне управління виконанням",
                    content: `На основі тижневого плану кожен співробітник планує день.
Це може бути в будь-якій формі: месенджер, таск-менеджер, нотатки.

<strong>У TALKO System це працює так:</strong>
• тиждень — "контракт" на результати
• день — "режим виконання"`
                },
                {
                    title: "5. Чому старт з тижня дає швидкий ефект",
                    content: `Коли у компанії з'являється якісний тижневий план:

• ефективність росте вже в перші 2–4 тижні
• керівники починають краще бачити свою зону відповідальності
• з'являються питання про довші плани (тактичні)
• виникає потреба в узгодженій стратегії

<strong>Тобто компанія природно доростає до тактики і стратегії</strong> — не "бо так правильно", а бо інакше тиждень не зібрати.`
                },
                {
                    title: "6. Висновок: чому саме таке впровадження правильне",
                    content: `Академічно можна починати зі стратегії.
Практично — це майже завжди зливається.

<strong>У TALKO System ми йдемо від реального управління:</strong>

1. вчимо тиждень (оперативка)
2. вирощуємо керівників (звичка відповідальності)
3. будуємо тактику по функціях
4. тільки після цього системно доробляємо стратегію

<strong>Бо без тижня:</strong>
• немає дій
• немає дисципліни
• немає контролю
• немає реалізації

<strong>Тиждень — це фундамент, на якому стоїть вся піраміда.</strong>`
                }
            ],
            hasDiagram: true,
            questions: [
                {
                    id: 1,
                    question: "Чому різниця між стратегічним, тактичним і оперативним плануванням — це НЕ різниця в тривалості? Що насправді їх відрізняє?",
                    placeholder: "Опишіть своїми словами ключову відмінність між цими рівнями..."
                },
                {
                    id: 2,
                    question: "Чому впровадження планування з рівня стратегії зазвичай провалюється? Наведіть приклад з вашого досвіду.",
                    placeholder: "Згадайте ситуацію, коли стратегічний план залишився лише на папері..."
                },
                {
                    id: 3,
                    question: "Що означає фраза: «Якщо задача не потрапила в тижневий план — вона не існує як керована дія»? Як це стосується вашої компанії?",
                    placeholder: "Проаналізуйте, скільки важливих задач у вас «існують», але не потрапляють в тижневі плани..."
                }
            ],
            result: "Відповіді на 3 питання для закріплення матеріалу",
            time: 30
        },
        {
            id: 3,
            title: "ФОРМА ПЛАНУ НА ТИЖДЕНЬ",
            subtitle: "Детальний розбір кожного поля бланку",
            type: "article",
            hasDownload: true,
            downloadUrl: "https://docs.google.com/spreadsheets/d/1YOUR_TEMPLATE_ID/copy",
            articleSections: [
                {
                    title: "Що таке форма плану і навіщо вона потрібна",
                    content: `<strong>Форма плану на тиждень — це стандартний бланк</strong>, який заповнює кожен співробітник щотижня.

<strong>⚠️ ВАЖЛИВА ПРИМІТКА:</strong>
У цьому уроці ми говоримо саме про СТАНДАРТ — як має виглядати план, які поля він містить, що в них писати. 

Не має значення, яку програму ви оберете:
• Google Таблиці
• Excel
• Notion
• Trello
• Паперовий бланк
• Будь-який таск-менеджер

<strong>Головне — дотримуватись стандарту.</strong> Форма може бути в будь-якому інструменті, але ЗМІСТ і СТРУКТУРА мають відповідати тому, що описано в цьому уроці.

Це НЕ просто список справ. Це офіційний документ, який:
• фіксує, що саме людина збирається зробити цього тижня
• показує, скільки часу займе кожне завдання
• прив'язує завдання до конкретних результатів (продуктів)
• дозволяє керівнику перевірити і схвалити план

<strong>Чому це важливо?</strong>

Без форми план існує лише в голові співробітника. А те, що в голові:
• легко забувається
• легко змінюється
• неможливо проконтролювати
• неможливо узгодити з іншими

<strong>Форма плану — це "контракт" між співробітником і компанією на тиждень.</strong>

Коли план написаний на папері (або в таблиці) — він стає реальним. Його можна обговорити, виправити, схвалити. І потім — перевірити виконання.`
                },
                {
                    title: "Шапка плану: хто, коли, що",
                    content: `У верхній частині форми є кілька обов'язкових полів. Розберемо кожне:

<strong>📌 ПОСАДА</strong>

Тут пишемо посаду (або посади), які обіймає співробітник.

Чому це важливо? Тому що одна людина може виконувати кілька ролей. Наприклад:
• "Керівник відділу продажів" + "Менеджер з ключових клієнтів"
• "Бухгалтер" + "HR-менеджер"

Якщо людина суміщає посади — план має враховувати ОБІ ролі.

Назву посади можна скорочувати, якщо в компанії є прийнята система скорочень.

<strong>📌 ДАТА</strong>

Дата початку тижня, на який складено план.

Наприклад: "13.01.2025" — означає, що це план на тиждень з 13 по 19 січня.

<strong>📌 ПІБ</strong>

Прізвище, ім'я (і по батькові, якщо прийнято в компанії) того, хто склав план.

Це потрібно, щоб було зрозуміло — ЧИЙ це план. Особливо коли керівник переглядає плани всіх підлеглих.`
                },
                {
                    title: "Блок СТАТИСТИКИ: що вимірюємо",
                    content: `<strong>Статистика — це числовий показник результату роботи.</strong>

Кожен відділ (і кожна посада) має свою головну статистику. Це те, що можна ПОРАХУВАТИ.

<strong>Приклади статистик:</strong>
• Відділ продажів: кількість угод, сума продажів у гривнях
• Виробництво: кількість виготовлених одиниць
• HR: кількість закритих вакансій
• Маркетинг: кількість лідів, охоплення

<strong>У формі для кожної статистики вказуємо:</strong>

📌 <strong>ОД. ВИМ. (одиниця виміру)</strong>
Як саме вимірюється ця статистика:
• грн, $, € — для грошей
• шт. — для кількості
• бали — для оцінок
• % — для відсотків

📌 <strong>КІЛЬКІСТЬ</strong>
Скільки було МИНУЛОГО тижня. Це факт — те, що вже відбулося.

Наприклад: минулого тижня продали на 50 000 грн.

📌 <strong>КВОТА</strong>
Скільки ПЛАНУЄТЬСЯ на наступний тиждень. Це план — те, чого хочемо досягти.

Наприклад: наступного тижня планується продати на 60 000 грн.

<strong>Квота — це не "хотілося б", а конкретний план, під який будуть виділені завдання.</strong>

Якщо квота 60 000 грн — у плані мають бути конкретні завдання, які забезпечать ці 60 000 грн.`
                },
                {
                    title: "Як заповнювати список завдань",
                    content: `Основна частина плану — це таблиця із завданнями. Кожен рядок — одне завдання.

<strong>📌 № (номер)</strong>
Просто порядковий номер завдання: 1, 2, 3...

Навіщо? Щоб легко посилатися: "Завдання №5 потребує узгодження".

<strong>📌 НАЗВА (завдання)</strong>
Що саме потрібно зробити. Формулювання дії.

❌ ПОГАНО: "Клієнти"
✅ ДОБРЕ: "Зателефонувати 20 клієнтам з бази для повторного продажу"

❌ ПОГАНО: "Маркетинг"
✅ ДОБРЕ: "Підготувати 3 пости для Facebook на наступний тиждень"

<strong>Правило: завдання має бути конкретним і зрозумілим.</strong>

Якщо прочитавши завдання незрозуміло, ЩО саме робити — це погане формулювання.

<strong>📌 ПРОДУКТ</strong>
Що з'явиться ПІСЛЯ виконання завдання. Який результат?

Завдання: "Зателефонувати 20 клієнтам"
Продукт: "20 клієнтів проінформовані про акцію, 5 записані на зустріч"

Завдання: "Підготувати пости для Facebook"
Продукт: "3 готових поста з картинками та текстами"

<strong>Продукт — це те, що можна ПОБАЧИТИ, ПОКАЗАТИ, ПЕРЕДАТИ.</strong>

Якщо після виконання завдання нічого не з'явилося — значить завдання було безрезультатним.`
                },
                {
                    title: "Планування часу: найважливіший елемент",
                    content: `<strong>📌 ЧАС ПЛАН</strong>
Скільки годин (або хвилин) ви плануєте витратити на це завдання.

Це ПРОГНОЗ. Ваша оцінка: "Я думаю, що це займе 2 години".

<strong>Чому це критично важливо?</strong>

У тижні є обмежена кількість робочих годин. Наприклад, 40 годин.

Якщо ви запланували завдань на 60 годин — план НЕМОЖЛИВО виконати фізично. Це не питання мотивації чи старанності. Це математика.

<strong>Правило TALKO System:</strong>
Сума всіх "Час план" не може перевищувати реальний робочий час тижня.

<strong>📌 ЧАС ФАКТ</strong>
Скільки годин реально витратили на завдання.

Це заповнюється ПІСЛЯ виконання, у звіті.

Навіщо? Щоб наступного разу точніше планувати.

Якщо ви планували 2 години, а витратили 5 — це важлива інформація. Наступного разу будете планувати реалістичніше.

<strong>📌 ДАТА ВИКОНАННЯ</strong>
Коли завдання було фактично завершене.

Заповнюється тільки у звіті, і тільки якщо завдання ПОВНІСТЮ виконане.`
                },
                {
                    title: "УСЬОГО ГОДИН: перевірка реалістичності",
                    content: `Внизу таблиці завдань є поле <strong>"УСЬОГО ГОДИН"</strong>.

Це сума всіх запланованих годин на всі завдання.

<strong>Це найважливіша перевірка плану!</strong>

Приклад:
• Завдання 1: 3 години
• Завдання 2: 5 годин
• Завдання 3: 2 години
• Регулярні завдання: 15 годин
• УСЬОГО: 25 годин

Якщо робочий тиждень = 40 годин, то 25 годин — це реалістично. Є запас на непередбачене.

Якщо УСЬОГО = 55 годин при 40-годинному тижні — план НЕРЕАЛІСТИЧНИЙ. Потрібно:
• прибрати деякі завдання
• делегувати частину
• перенести на наступний тиждень

<strong>План, який неможливо виконати — це не план. Це фантазія.</strong>

Краще запланувати менше і виконати все, ніж запланувати багато і провалити.`
                },
                {
                    title: "Поле СХВАЛЕНО: чому це обов'язково",
                    content: `<strong>📌 СХВАЛЕНО</strong>
Підпис керівника, який затвердив цей план.

<strong>Навіщо потрібне схвалення?</strong>

1. <strong>Перевірка реалістичності</strong>
Керівник бачить, чи не забагато завдань. Чи є час на все.

2. <strong>Перевірка пріоритетів</strong>
Чи правильні завдання в плані? Чи це те, що зараз найважливіше?

3. <strong>Узгодження з іншими</strong>
Чи не заважатиме цей план роботі інших відділів?

4. <strong>Фіксація домовленості</strong>
Коли керівник підписав — це означає: "Я погоджуюсь. Роби за цим планом."

<strong>Без схвалення план — це просто список бажань співробітника.</strong>

Зі схваленням план — це офіційна домовленість, за яку є відповідальність.

<strong>Важливо:</strong> Схвалення НЕ означає, що керівник тепер відповідає за виконання. Відповідає той, хто написав план. Керівник лише підтвердив, що план адекватний.`
                },
                {
                    title: "РЕГУЛЯРНІ ЗАВДАННЯ: що повторюється щотижня",
                    content: `У кожної посади є завдання, які повторюються КОЖНОГО тижня. Це регулярні завдання.

<strong>Приклади регулярних завдань керівника:</strong>

• Обробити вхідну комунікацію (листи, повідомлення) — <em>2,5 год/тиждень</em>
• Скласти план на день, узгодити зустрічі — <em>1 год/тиждень</em>
• Щоденна координація з керівником — <em>1,5 год/тиждень</em>
• Порахувати щотижневі статистики — <em>20 хв</em>
• Скласти план на тиждень — <em>20 хв</em>
• Підготувати фінансові заявки — <em>20 хв</em>
• Загальні збори персоналу — <em>40 хв</em>
• Провести координацію з підлеглими — <em>1,5 год/тиждень</em>

<strong>Чому регулярні завдання винесені окремо?</strong>

1. Вони займають багато часу. Якщо їх не врахувати — план буде нереалістичним.

2. Їх не потрібно щоразу придумувати заново. Вони стандартні.

3. Вони забезпечують базове функціонування. Без них система не працює.

<strong>Рекомендований час</strong> (вказаний у формі сірим) — це орієнтир на основі досвіду. Ваш реальний час може відрізнятися.`
                },
                {
                    title: "ЗАВДАННЯ ДЛЯ ДОСЯГНЕННЯ КВОТИ: що дає результат",
                    content: `Окремо виділяються завдання, які <strong>безпосередньо впливають на досягнення квоти</strong>.

<strong>Що це означає?</strong>

Квота — це план по статистиці. Наприклад: продати на 100 000 грн.

Завдання для досягнення квоти — це ті дії, які ПРЯМО ведуть до цієї цифри.

<strong>Приклад:</strong>
Квота: 100 000 грн продажів

Завдання для квоти:
• Провести 10 зустрічей з потенційними клієнтами
• Закрити 3 угоди з існуючими клієнтами
• Зробити 50 холодних дзвінків

Завдання НЕ для квоти:
• Оновити CRM-систему
• Пройти навчання
• Провести нараду відділу

<strong>Чому це важливо виділяти?</strong>

Часто люди зайняті "важливими справами", але квоту не виконують. Коли завдання для квоти виділені окремо — одразу видно:
• Чи є вони взагалі в плані?
• Чи достатньо їх для досягнення квоти?
• Чи не "заховані" вони серед купи інших справ?

<strong>У формі завдання для квоти виділяються СИНІМ кольором.</strong>`
                },
                {
                    title: "ЗАВДАННЯ ДЛЯ УЗГОДЖЕННЯ: що вимагає координації",
                    content: `Деякі завдання неможливо виконати самостійно. Потрібна участь інших людей або відділів.

<strong>Приклади завдань для узгодження:</strong>

• "Запустити рекламну кампанію" — потрібен дизайнер, копірайтер, бюджет від фінансів
• "Найняти нового менеджера" — потрібне узгодження з директором
• "Змінити процес обробки замовлень" — впливає на склад, доставку, бухгалтерію

<strong>Чому важливо виділяти такі завдання?</strong>

Якщо не узгодити заздалегідь — завдання "застрягне".

Ви плануєте: "Запустити кампанію в середу".
Але дизайнер зайнятий іншим проектом і не знав про ваші плани.
Результат: кампанія не запущена, план зірвано.

<strong>Правило:</strong> Завдання для узгодження обговорюються на координації (рекомендаційній раді) ДО початку тижня.

<strong>У формі завдання для узгодження виділяються ЧЕРВОНИМ кольором.</strong>`
                },
                {
                    title: "НЕЗАПЛАНОВАНІ ЗАВДАННЯ: що з'явилося по ходу",
                    content: `Протягом тижня завжди з'являються завдання, яких не було в плані.

<strong>Приклади:</strong>
• Терміновий запит від клієнта
• Поламалося обладнання
• Захворів колега, треба підмінити
• Нова ідея від керівництва

<strong>Що з ними робити?</strong>

НЕ ігнорувати. Записувати в розділ "Незаплановані завдання".

Для кожного вказуємо:
• Назва завдання
• Продукт (результат)
• Час план / Час факт
• Дата виконання

<strong>Навіщо записувати?</strong>

1. <strong>Облік реального часу.</strong> Незаплановані завдання "з'їдають" час. Якщо їх не записувати — незрозуміло, куди пішов час.

2. <strong>Аналіз.</strong> Якщо щотижня багато незапланованого — це сигнал. Можливо, процеси погано налаштовані. Або планування нереалістичне.

3. <strong>Захист від звинувачень.</strong> "Чому не виконав план?" — "Тому що витратив 10 годин на незаплановані термінові задачі. Ось список."

<strong>Незаплановане — це нормально. Погано, коли воно НЕ фіксується.</strong>`
                },
                {
                    title: "Типові помилки у формулюванні завдань",
                    content: `<strong>❌ ПОМИЛКА 1: Завдання без конкретики</strong>

Погано: "Працювати з клієнтами"
Добре: "Зателефонувати 15 клієнтам з бази для збору зворотного зв'язку"

<strong>❌ ПОМИЛКА 2: Процес замість результату</strong>

Погано: "Займатися маркетингом"
Добре: "Створити 5 рекламних оголошень для Facebook"

<strong>❌ ПОМИЛКА 3: "Проконтролювати" без конкретики</strong>

Погано: "Проконтролювати виконання"
Добре: "Зателефонувати підряднику, отримати звіт про статус робіт"

Чому "проконтролювати" — погано?
• Як саме контролювати? Зателефонувати? Написати? Зустрітися?
• Скільки це займе часу?
• Який результат контролю?

<strong>❌ ПОМИЛКА 4: "Організувати" без деталей</strong>

Погано: "Організувати зустріч"
Добре: "Узгодити час з учасниками, забронювати переговорну, підготувати порядок денний"

<strong>❌ ПОМИЛКА 5: Завдання без продукту</strong>

Якщо не можете написати, який ПРОДУКТ отримаєте — завдання сформульоване погано.

Правило: <strong>Кожне завдання має закінчуватись чимось, що можна показати.</strong>`
                },
                {
                    title: "ЗВІТ З РЕЗУЛЬТАТІВ: як закрити тиждень",
                    content: `В кінці тижня план перетворюється на ЗВІТ.

<strong>Що змінюється у звіті порівняно з планом:</strong>

1. <strong>Заповнюємо "Час факт"</strong>
Скільки реально витратили на кожне завдання.

2. <strong>Заповнюємо "Дата виконання"</strong>
Коли завдання було завершене. Тільки для повністю виконаних!

3. <strong>Вказуємо фактичну кількість по статистиках</strong>
Що планували — і що вийшло насправді.

4. <strong>Додаємо незаплановані завдання</strong>
Що з'явилося по ходу тижня.

<strong>Приклад звіту:</strong>

Завдання: "Провести 10 зустрічей з клієнтами"
Час план: 10 год
Час факт: 12 год
Дата виконання: 17.01.2025
Продукт: 10 проведених зустрічей, 3 підписані угоди

<strong>Звіт — це основа для аналізу.</strong>

• Чому витратили більше часу?
• Чому не виконали якесь завдання?
• Що завадило досягти квоти?

Без звіту наступний план буде таким самим нереалістичним.`
                },
                {
                    title: "Рекомендація: використовуйте Google Таблиці",
                    content: `<strong>Нагадуємо: стандарт важливіший за інструмент!</strong>

Ви можете вести план у будь-якій програмі. Але ми рекомендуємо Google Таблиці, тому що:

✅ Легко копіювати шаблон щотижня
✅ Можна ділитися з керівником для схвалення
✅ Автоматичний підрахунок суми годин
✅ Історія всіх планів зберігається
✅ Можна працювати з телефону
✅ Пошук по старих планах
✅ Безкоштовно

<strong>Як організувати:</strong>

1. Створіть папку "Плани [Ваше ім'я]"
2. Всередині — окремий файл на кожен тиждень
3. Назва файлу: "План 13.01.2025 - 19.01.2025"
4. Або один файл з окремими вкладками на кожен тиждень

<strong>Нижче два шаблони:</strong>
• <strong>Заповнений приклад</strong> — з підказками (наведіть курсор на клітинки), вивчіть спочатку
• <strong>Чистий шаблон</strong> — для щотижневої роботи

Завантажте обидва, вивчіть приклад, потім працюйте з чистим.`
                }
            ],
            hasTemplate: true,
            templateDownloadUrl: "TEMPLATE_URL",
            questions: [
                {
                    id: 1,
                    question: "Яка різниця між полями «Назва завдання» і «Продукт»? Чому важливо заповнювати обидва?",
                    placeholder: "Опишіть своїми словами, що пишеться в кожному полі і навіщо..."
                },
                {
                    id: 2,
                    question: "Що таке «квота» і як завдання в плані мають бути пов'язані з квотою?",
                    placeholder: "Поясніть зв'язок між квотою по статистиці та завданнями в плані..."
                },
                {
                    id: 3,
                    question: "Чому поле «Усього годин» є найважливішою перевіркою плану? Що робити, якщо сума більша за робочий час тижня?",
                    placeholder: "Опишіть, як перевірити реалістичність плану і що робити при перевантаженні..."
                }
            ],
            result: "Відповіді на 3 питання + завантажений шаблон плану",
            time: 35
        }
    ];

    // Make modules mutable for progress tracking
    let modules = JSON.parse(JSON.stringify(courseData));

    // ===== AUTHENTICATION =====
    auth.onAuthStateChanged(async (user) => {
        if (user) {
            currentUser = user;
            document.getElementById('user-email').textContent = user.email;
            await loadUserProgress();
            showMainApp();
        } else {
            currentUser = null;
            showLoginScreen();
        }
    });

    document.getElementById('login-form').addEventListener('submit', async (e) => {
        e.preventDefault();
        
        const email = document.getElementById('email').value;
        const password = document.getElementById('password').value;
        const loginBtn = document.getElementById('login-btn');
        const loginBtnText = document.getElementById('login-btn-text');
        const errorDiv = document.getElementById('login-error');
        const errorText = document.getElementById('login-error-text');
        
        loginBtn.disabled = true;
        loginBtnText.textContent = 'Вхід...';
        errorDiv.classList.add('hidden');
        
        try {
            await auth.signInWithEmailAndPassword(email, password);
        } catch (error) {
            console.error('Login error:', error);
            errorDiv.classList.remove('hidden');
            
            switch (error.code) {
                case 'auth/user-not-found':
                    errorText.textContent = 'Користувача не знайдено';
                    break;
                case 'auth/wrong-password':
                    errorText.textContent = 'Невірний пароль';
                    break;
                case 'auth/invalid-email':
                    errorText.textContent = 'Невірний формат email';
                    break;
                case 'auth/too-many-requests':
                    errorText.textContent = 'Забагато спроб. Спробуйте пізніше';
                    break;
                default:
                    errorText.textContent = 'Помилка входу. Спробуйте ще раз';
            }
        } finally {
            loginBtn.disabled = false;
            loginBtnText.textContent = 'Увійти';
        }
    });

    window.logout = function() {
        auth.signOut();
    }

    // ===== DATA MANAGEMENT =====
    async function loadUserProgress() {
        if (!currentUser) return;
        
        try {
            const doc = await db.collection('users').doc(currentUser.uid).get();
            
            if (doc.exists) {
                userProgress = doc.data();
                
                // Restore module states from saved progress
                if (userProgress.modules) {
                    modules.forEach(module => {
                        const savedModule = userProgress.modules.find(m => m.id === module.id);
                        if (savedModule) {
                            module.completed = savedModule.completed || false;
                            module.homeworkText = savedModule.homeworkText || '';
                            module.completedAt = savedModule.completedAt || null;
                            module.answers = savedModule.answers || {};
                        }
                    });
                }
            }
            
            isDataLoaded = true;
            updateStats();
            renderModules();
        } catch (error) {
            console.error('Error loading progress:', error);
            isDataLoaded = true;
            renderModules();
        }
    }

    function debouncedSave() {
        if (saveTimeout) clearTimeout(saveTimeout);
        saveTimeout = setTimeout(saveUserProgress, 1000);
    }

    async function saveUserProgress() {
        if (!currentUser || !isDataLoaded) return;
        
        try {
            const dataToSave = {
                modules: modules.map(m => ({
                    id: m.id,
                    completed: m.completed || false,
                    homeworkText: m.homeworkText || '',
                    completedAt: m.completedAt || null,
                    answers: m.answers || {}
                })),
                lastUpdated: firebase.firestore.FieldValue.serverTimestamp()
            };
            
            await db.collection('users').doc(currentUser.uid).set(dataToSave, { merge: true });
        } catch (error) {
            console.error('Error saving progress:', error);
        }
    }

    // ===== UI FUNCTIONS =====
    function showLoginScreen() {
        document.getElementById('login-screen').classList.remove('hidden');
        document.getElementById('main-app').classList.add('hidden');
    }

    function showMainApp() {
        document.getElementById('login-screen').classList.add('hidden');
        document.getElementById('main-app').classList.remove('hidden');
    }

    function updateStats() {
        const completedModules = modules.filter(m => m.completed).length;
        const totalModules = modules.length;
        const progressPercent = Math.round((completedModules / totalModules) * 100);
        const totalTime = modules.reduce((sum, m) => sum + m.time, 0);
        
        document.getElementById('progress-percent').textContent = `${progressPercent}%`;
        document.getElementById('completed-count').textContent = `${completedModules}/${totalModules}`;
        document.getElementById('total-time').textContent = totalTime;
    }

    function renderModules() {
        const grid = document.getElementById('modules-grid');
        
        grid.innerHTML = modules.map(module => `
            <div class="module-card ${module.completed ? 'completed' : ''}" onclick="openModule(${module.id})">
                <div class="module-icon">
                    ${module.completed 
                        ? '<svg class="icon icon-md"><use href="#icon-check"/></svg>'
                        : '<svg class="icon icon-md"><use href="#icon-book"/></svg>'
                    }
                </div>
                <div class="module-content">
                    <div class="module-title">МОДУЛЬ ${module.id}: ${module.title}</div>
                    <div class="module-subtitle">${module.subtitle}</div>
                </div>
                <div class="module-meta">
                    <span class="module-time">
                        <svg class="icon icon-xs"><use href="#icon-clock"/></svg>
                        ${module.time} хв
                    </span>
                    <button class="module-btn">
                        ${module.completed ? 'Переглянути' : 'Відкрити'}
                        <svg class="icon icon-xs"><use href="#icon-arrow-right"/></svg>
                    </button>
                </div>
            </div>
        `).join('');
    }

    window.openModule = function(moduleId) {
        const module = modules.find(m => m.id === moduleId);
        if (!module) return;

        currentModule = module;
        
        // Update header
        document.getElementById('lesson-title').textContent = `МОДУЛЬ ${module.id}: ${module.title}`;
        
        const lessonIcon = document.getElementById('lesson-icon');
        if (module.completed) {
            lessonIcon.className = 'lesson-icon completed';
            lessonIcon.innerHTML = '<svg class="icon icon-lg"><use href="#icon-check"/></svg>';
        } else {
            lessonIcon.className = 'lesson-icon';
            lessonIcon.innerHTML = '<svg class="icon icon-lg"><use href="#icon-book"/></svg>';
        }
        
        document.getElementById('lesson-time').innerHTML = `
            <svg class="icon icon-xs"><use href="#icon-clock"/></svg>
            <span>${module.time} хв</span>
        `;
        
        document.getElementById('lesson-status-text').textContent = module.completed ? 'Завершено' : 'Доступний';
        
        document.getElementById('result-text').textContent = module.result;
        
        // Build lesson content based on type
        const lessonContent = document.getElementById('lesson-content');
        
        if (module.type === 'article') {
            // Article with accordion
            let accordionHTML = '<div class="article-accordion">';
            module.articleSections.forEach((section, index) => {
                accordionHTML += `
                    <div class="accordion-item ${index === 0 ? 'open' : ''}">
                        <div class="accordion-header" onclick="toggleAccordion(this)">
                            <span class="accordion-title">${section.title}</span>
                            <svg class="accordion-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="6 9 12 15 18 9"/>
                            </svg>
                        </div>
                        <div class="accordion-content">
                            <div class="accordion-body">${section.content}</div>
                        </div>
                    </div>
                `;
            });
            accordionHTML += '</div>';
            
            // Diagram section (if module has diagram)
            let diagramHTML = '';
            if (module.hasDiagram) {
                diagramHTML = `
                    <div class="diagram-section">
                        <div class="diagram-title">Схема рівнів планування TALKO System</div>
                        <div class="pyramid-diagram">
                            <div class="pyramid-level strategy">
                                <div class="pyramid-level-content">
                                    <span class="pyramid-level-title">СТРАТЕГІЯ</span>
                                    <span class="pyramid-level-subtitle">Зміна самої компанії</span>
                                </div>
                            </div>
                            <div class="pyramid-arrow">↓</div>
                            <div class="pyramid-level tactics">
                                <div class="pyramid-level-content">
                                    <span class="pyramid-level-title">ТАКТИКА</span>
                                    <span class="pyramid-level-subtitle">Плани керівників по функціях</span>
                                </div>
                            </div>
                            <div class="pyramid-arrow">↓</div>
                            <div class="pyramid-level operations">
                                <div class="pyramid-level-content">
                                    <span class="pyramid-level-title">ТИЖДЕНЬ</span>
                                    <span class="pyramid-level-subtitle">Конкретні дії та відповідальність</span>
                                    <span class="start-badge">
                                        <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                                            <polyline points="20 6 9 17 4 12"/>
                                        </svg>
                                        Починаємо тут
                                    </span>
                                </div>
                            </div>
                        </div>
                        <div class="diagram-note">
                            <p><strong>Ключове правило:</strong> Стратегія і тактика існують рівно настільки, наскільки вони конвертуються в тижневі дії. Без тижня — немає реалізації.</p>
                        </div>
                    </div>
                `;
            }
            
            // Download section (if module has download)
            let downloadHTML = '';
            if (module.hasDownload) {
                if (module.downloadLinks && module.downloadLinks.length > 0) {
                    let buttonsHTML = module.downloadLinks.map((link, index) => `
                        <a href="${link.url}" target="_blank" class="download-btn ${index > 0 ? 'secondary' : ''}">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                                <polyline points="7 10 12 15 17 10"/>
                                <line x1="12" y1="15" x2="12" y2="3"/>
                            </svg>
                            <span class="download-btn-content">
                                <span class="download-btn-name">${link.name}</span>
                                <span class="download-btn-desc">${link.description}</span>
                            </span>
                        </a>
                    `).join('');
                    
                    downloadHTML = `
                        <div class="download-section">
                            <div class="download-title">Завантажте шаблони</div>
                            <div class="download-buttons">${buttonsHTML}</div>
                        </div>
                    `;
                } else if (module.downloadUrl) {
                    downloadHTML = `
                        <div class="download-section">
                            <div class="download-title">Завантажте шаблон</div>
                            <div class="download-buttons">
                                <a href="${module.downloadUrl}" target="_blank" class="download-btn">
                                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></svg>
                                    Відкрити в Google Таблицях
                                </a>
                            </div>
                        </div>
                    `;
                }
            }
            
            // Template section (embedded table)
            let templateHTML = '';
            if (module.hasTemplate) {
                templateHTML = `
                    <div class="template-section">
                        <div class="template-header">
                            <div class="template-header-left">
                                <svg class="template-header-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <rect x="3" y="3" width="18" height="18" rx="2"/>
                                    <line x1="3" y1="9" x2="21" y2="9"/>
                                    <line x1="9" y1="21" x2="9" y2="9"/>
                                </svg>
                                <span class="template-header-title">БЛАНК ПЛАНУ НА ТИЖДЕНЬ</span>
                            </div>
                            <div class="template-header-badge">
                                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                                    <polyline points="14 2 14 8 20 8"/>
                                </svg>
                                Стандарт TALKO
                            </div>
                        </div>
                        
                        <div class="template-body">
                            <!-- Шапка -->
                            <div class="template-info-row">
                                <div class="template-info-item">
                                    <span class="template-info-label">Посада:</span>
                                    <span class="template-info-value">Керівник відділу продажів</span>
                                </div>
                                <div class="template-info-item">
                                    <span class="template-info-label">Дата:</span>
                                    <span class="template-info-value">13.01.2025</span>
                                </div>
                            </div>
                            <div class="template-info-row">
                                <div class="template-info-item" style="grid-column: 1 / -1;">
                                    <span class="template-info-label">ПІБ:</span>
                                    <span class="template-info-value">Петренко Олександр Іванович</span>
                                </div>
                            </div>
                            
                            <!-- Статистики -->
                            <table class="template-table">
                                <tr class="section-row">
                                    <td colspan="5">
                                        <svg class="section-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <line x1="18" y1="20" x2="18" y2="10"/>
                                            <line x1="12" y1="20" x2="12" y2="4"/>
                                            <line x1="6" y1="20" x2="6" y2="14"/>
                                        </svg>
                                        СТАТИСТИКИ
                                    </td>
                                </tr>
                                <tr>
                                    <th style="width:5%">№</th>
                                    <th style="width:35%">Назва статистики</th>
                                    <th style="width:15%">Од. вимір.</th>
                                    <th style="width:20%">Факт (мин. тижд.)</th>
                                    <th style="width:25%">Квота (план)</th>
                                </tr>
                                <tr>
                                    <td>1</td>
                                    <td class="input-cell"><span class="example-text">Сума продажів</span></td>
                                    <td class="input-cell"><span class="example-text">грн</span></td>
                                    <td class="input-cell"><span class="example-text">85 000</span></td>
                                    <td class="input-cell"><strong style="color: var(--primary-dark)">100 000</strong></td>
                                </tr>
                                <tr>
                                    <td>2</td>
                                    <td class="input-cell"><span class="example-text">Кількість нових клієнтів</span></td>
                                    <td class="input-cell"><span class="example-text">шт.</span></td>
                                    <td class="input-cell"><span class="example-text">12</span></td>
                                    <td class="input-cell"><strong style="color: var(--primary-dark)">15</strong></td>
                                </tr>
                            </table>
                            
                            <!-- Завдання для квот -->
                            <table class="template-table" style="margin-top: 1rem;">
                                <tr class="section-row">
                                    <td colspan="5">
                                        <svg class="section-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <circle cx="12" cy="12" r="10"/>
                                            <circle cx="12" cy="12" r="6"/>
                                            <circle cx="12" cy="12" r="2"/>
                                        </svg>
                                        ЗАВДАННЯ ДЛЯ ДОСЯГНЕННЯ КВОТ
                                        <span class="quota-badge" style="margin-left: 0.5rem;">
                                            <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/></svg>
                                            Синій
                                        </span>
                                    </td>
                                </tr>
                                <tr>
                                    <th style="width:5%">№</th>
                                    <th style="width:35%">Завдання</th>
                                    <th style="width:30%">Продукт (результат)</th>
                                    <th style="width:15%">Час план</th>
                                    <th style="width:15%">Час факт</th>
                                </tr>
                                <tr>
                                    <td>1</td>
                                    <td class="input-cell"><span class="example-text" style="color: #2563eb;">Провести 10 зустрічей з потенційними клієнтами</span></td>
                                    <td class="input-cell"><span class="example-text">10 зустрічей, 3 КП</span></td>
                                    <td class="input-cell"><span class="example-text">10 год</span></td>
                                    <td class="input-cell"></td>
                                </tr>
                                <tr>
                                    <td>2</td>
                                    <td class="input-cell"><span class="example-text" style="color: #2563eb;">Зробити 50 холодних дзвінків</span></td>
                                    <td class="input-cell"><span class="example-text">8 призначених зустрічей</span></td>
                                    <td class="input-cell"><span class="example-text">5 год</span></td>
                                    <td class="input-cell"></td>
                                </tr>
                                <tr>
                                    <td>3</td>
                                    <td class="input-cell"></td>
                                    <td class="input-cell"></td>
                                    <td class="input-cell"></td>
                                    <td class="input-cell"></td>
                                </tr>
                            </table>
                            
                            <!-- Регулярні завдання -->
                            <table class="template-table" style="margin-top: 1rem;">
                                <tr class="section-row">
                                    <td colspan="5">
                                        <svg class="section-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <polyline points="23 4 23 10 17 10"/>
                                            <path d="M20.49 15a9 9 0 1 1-2.12-9.36L23 10"/>
                                        </svg>
                                        РЕГУЛЯРНІ ЗАВДАННЯ
                                    </td>
                                </tr>
                                <tr>
                                    <th>№</th>
                                    <th>Завдання</th>
                                    <th>Продукт</th>
                                    <th>Час план</th>
                                    <th>Час факт</th>
                                </tr>
                                <tr>
                                    <td>1</td>
                                    <td><span class="example-text">Обробити вхідну комунікацію</span></td>
                                    <td><span class="example-text">Оброблені листи</span></td>
                                    <td style="background: var(--bg-secondary); color: var(--text-muted);">2,5 год</td>
                                    <td class="input-cell"></td>
                                </tr>
                                <tr>
                                    <td>2</td>
                                    <td><span class="example-text">Координація з керівником</span></td>
                                    <td><span class="example-text">Схвалений план</span></td>
                                    <td style="background: var(--bg-secondary); color: var(--text-muted);">1,5 год</td>
                                    <td class="input-cell"></td>
                                </tr>
                            </table>
                            
                            <!-- Завдання для узгодження -->
                            <table class="template-table" style="margin-top: 1rem;">
                                <tr class="section-row">
                                    <td colspan="5">
                                        <svg class="section-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/>
                                            <circle cx="9" cy="7" r="4"/>
                                            <path d="M23 21v-2a4 4 0 0 0-3-3.87"/>
                                            <path d="M16 3.13a4 4 0 0 1 0 7.75"/>
                                        </svg>
                                        ЗАВДАННЯ ДЛЯ УЗГОДЖЕННЯ
                                        <span class="coord-badge" style="margin-left: 0.5rem;">
                                            <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/></svg>
                                            Червоний
                                        </span>
                                    </td>
                                </tr>
                                <tr>
                                    <th>№</th>
                                    <th>Завдання</th>
                                    <th>Продукт</th>
                                    <th>Час план</th>
                                    <th>Час факт</th>
                                </tr>
                                <tr>
                                    <td>1</td>
                                    <td class="input-cell"><span class="example-text" style="color: #dc2626;">Узгодити знижку 15% для клієнта</span></td>
                                    <td class="input-cell"><span class="example-text">Погоджена знижка</span></td>
                                    <td class="input-cell"><span class="example-text">30 хв</span></td>
                                    <td class="input-cell"></td>
                                </tr>
                            </table>
                            
                            <!-- Підсумок -->
                            <div style="margin-top: 1.25rem; display: flex; justify-content: space-between; align-items: center; padding: 1rem; background: var(--bg-accent); border-radius: var(--radius-md);">
                                <div>
                                    <strong>УСЬОГО ГОДИН ПЛАН:</strong>
                                    <span style="margin-left: 0.5rem; font-size: 1.25rem; color: var(--primary-dark); font-weight: 700;">≈ 34 год</span>
                                </div>
                                <div style="text-align: right;">
                                    <strong>СХВАЛЕНО:</strong>
                                    <span style="margin-left: 0.5rem; padding: 0.25rem 0.75rem; background: #fefce8; border: 1px dashed #eab308; border-radius: 4px; color: var(--text-muted); font-style: italic;">підпис керівника</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="template-footer">
                            <div class="template-legend">
                                <div class="template-legend-item">
                                    <span class="template-legend-color blue"></span>
                                    <span>Завдання для квоти</span>
                                </div>
                                <div class="template-legend-item">
                                    <span class="template-legend-color red"></span>
                                    <span>Для узгодження</span>
                                </div>
                                <div class="template-legend-item">
                                    <span class="template-legend-color yellow"></span>
                                    <span>Поля для заповнення</span>
                                </div>
                            </div>
                            <a href="${module.templateDownloadUrl}" target="_blank" class="template-download-btn">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                                    <polyline points="7 10 12 15 17 10"/>
                                    <line x1="12" y1="15" x2="12" y2="3"/>
                                </svg>
                                Завантажити шаблон
                            </a>
                        </div>
                    </div>
                `;
            }
            
            // Questions section
            let questionsHTML = `
                <div class="questions-section">
                    <div class="questions-title">
                        <svg class="icon icon-sm"><use href="#icon-alert"/></svg>
                        Питання для закріплення матеріалу
                    </div>
            `;
            
            module.questions.forEach((q, index) => {
                const savedAnswer = module.answers ? module.answers[q.id] || '' : '';
                questionsHTML += `
                    <div class="question-item">
                        <div class="question-label">
                            <span class="question-number">${index + 1}.</span>
                            <span>${q.question}</span>
                        </div>
                        <textarea 
                            class="question-textarea" 
                            data-question-id="${q.id}"
                            placeholder="${q.placeholder}"
                            onchange="saveQuestionAnswer(${q.id}, this.value)"
                        >${savedAnswer}</textarea>
                    </div>
                `;
            });
            
            questionsHTML += '</div>';
            
            lessonContent.innerHTML = accordionHTML + diagramHTML + downloadHTML + templateHTML + questionsHTML;
            
            // Update homework textarea with all answers
            updateHomeworkFromAnswers();
            
        } else {
            // Standard module with problem/achievement/homework
            let additionalContent = '';
            
            lessonContent.innerHTML = `
                <div class="lesson-section">
                    <span class="section-label problem">
                        <svg class="icon icon-xs"><use href="#icon-alert"/></svg>
                        ПРОБЛЕМА
                    </span>
                    <p class="section-content">${module.problem}</p>
                </div>
                
                <div class="lesson-section">
                    <span class="section-label achievement">
                        <svg class="icon icon-xs"><use href="#icon-target"/></svg>
                        ЩО ОТРИМАЄТЕ
                    </span>
                    <p class="section-content">${module.achievement}</p>
                </div>
                
                <div class="lesson-section">
                    <span class="section-label homework">
                        <svg class="icon icon-xs"><use href="#icon-book"/></svg>
                        ЗАВДАННЯ
                    </span>
                    <p class="section-content">${module.homework}</p>
                    <a href="${module.homeworkLink}" target="_blank" class="homework-link">
                        <svg class="icon icon-sm"><use href="#icon-external"/></svg>
                        ${module.homeworkLinkName}
                    </a>
                </div>
            `;
            
            document.getElementById('homework-textarea').value = module.homeworkText || '';
        }
        
        updateHomeworkStatus();
        
        // Show detail view
        document.getElementById('dashboard').classList.add('hidden');
        document.getElementById('module-detail').classList.add('active');
        
        window.scrollTo(0, 0);
    }

    window.toggleAccordion = function(header) {
        const item = header.parentElement;
        item.classList.toggle('open');
    }

    window.saveQuestionAnswer = function(questionId, value) {
        if (!currentModule) return;
        
        if (!currentModule.answers) {
            currentModule.answers = {};
        }
        currentModule.answers[questionId] = value;
        
        updateHomeworkFromAnswers();
        debouncedSave();
    }

    function updateHomeworkFromAnswers() {
        if (!currentModule || currentModule.type !== 'article') return;
        
        const textarea = document.getElementById('homework-textarea');
        let allAnswers = '';
        
        if (currentModule.answers && currentModule.questions) {
            currentModule.questions.forEach((q, index) => {
                const answer = currentModule.answers[q.id] || '';
                if (answer.trim()) {
                    allAnswers += `${index + 1}. ${q.question}\n${answer}\n\n`;
                }
            });
        }
        
        textarea.value = allAnswers.trim();
        currentModule.homeworkText = allAnswers.trim();
        
        updateHomeworkStatus();
    }

    window.showDashboard = function() {
        document.getElementById('module-detail').classList.remove('active');
        document.getElementById('dashboard').classList.remove('hidden');
        currentModule = null;
    }

    function updateHomeworkStatus() {
        const textarea = document.getElementById('homework-textarea');
        const statusSpan = document.getElementById('homework-status');
        const statusText = document.getElementById('homework-status-text');
        const submitBtn = document.getElementById('submit-btn');
        const submitBtnText = document.getElementById('submit-btn-text');
        const cancelBtn = document.getElementById('cancel-btn');
        
        const hasHomework = textarea.value.trim().length > 0;
        const isCompleted = currentModule?.completed;
        
        if (isCompleted) {
            statusSpan.className = 'homework-status completed';
            statusText.textContent = 'Завдання виконано';
            submitBtnText.textContent = 'Завершено';
            submitBtn.disabled = true;
            submitBtn.className = 'submit-btn completed';
            cancelBtn.classList.remove('hidden');
        } else if (hasHomework) {
            statusSpan.className = 'homework-status ready';
            statusText.textContent = 'Готово до завершення';
            submitBtnText.textContent = 'Завершити урок';
            submitBtn.disabled = false;
            submitBtn.className = 'submit-btn';
            cancelBtn.classList.add('hidden');
        } else {
            statusSpan.className = 'homework-status';
            statusText.textContent = 'Заповніть поле для завершення';
            submitBtnText.textContent = 'Завершити урок';
            submitBtn.disabled = true;
            submitBtn.className = 'submit-btn';
            cancelBtn.classList.add('hidden');
        }
    }

    window.submitHomework = function() {
        const textarea = document.getElementById('homework-textarea');
        const homeworkText = textarea.value.trim();
        
        if (!homeworkText || currentModule?.completed) return;
        
        currentModule.completed = true;
        currentModule.homeworkText = homeworkText;
        currentModule.completedAt = new Date().toISOString();
        
        debouncedSave();
        
        updateHomeworkStatus();
        
        const lessonIcon = document.getElementById('lesson-icon');
        lessonIcon.className = 'lesson-icon completed';
        lessonIcon.innerHTML = '<svg class="icon icon-lg"><use href="#icon-check"/></svg>';
        
        document.getElementById('lesson-status-text').textContent = 'Завершено';
        
        updateStats();
        renderModules();
        
        alert('Урок завершено успішно!');
    }

    window.cancelCompletion = function() {
        if (!currentModule?.completed) return;
        
        if (!confirm('Скасувати завершення уроку?')) return;
        
        currentModule.completed = false;
        currentModule.completedAt = null;
        
        debouncedSave();
        
        updateHomeworkStatus();
        
        const lessonIcon = document.getElementById('lesson-icon');
        lessonIcon.className = 'lesson-icon';
        lessonIcon.innerHTML = '<svg class="icon icon-lg"><use href="#icon-book"/></svg>';
        
        document.getElementById('lesson-status-text').textContent = 'Доступний';
        
        updateStats();
        renderModules();
    }

    // Auto-save homework text on input
    document.getElementById('homework-textarea').addEventListener('input', function() {
        if (currentModule && isDataLoaded) {
            currentModule.homeworkText = this.value;
            debouncedSave();
        }
        updateHomeworkStatus();
    });

    // ===== INITIALIZATION =====
    function init() {
        updateStats();
        renderModules();
    }

    document.addEventListener('DOMContentLoaded', init);
</script>

<!-- ===== FLOATING SUPPORT BUTTON ===== -->
<a href="#" target="_blank" class="support-button" title="AI Підтримка курсу">
    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <circle cx="12" cy="12" r="10"/>
        <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"/>
        <line x1="12" y1="17" x2="12.01" y2="17"/>
    </svg>
    <span class="support-button-text">AI Підтримка</span>
</a>

</body>
</html>
